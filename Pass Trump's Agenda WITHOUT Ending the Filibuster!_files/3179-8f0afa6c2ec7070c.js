!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="92b8d211-3afc-410e-960e-884e595e4037",e._sentryDebugIdIdentifier="sentry-dbid-92b8d211-3afc-410e-960e-884e595e4037")}catch(e1){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3179],{67574:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{F:function(){return bucketsResponseMapper},W:function(){return agenciesGetResponseMapper}});var lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(50361),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__);let agenciesGetResponseMapper=res=>{let clonedRes=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default()(res);return delete clonedRes.data.agencyMembers,{data:{agencyMembers:res.data.agencyMembers,byPromoter:{buckets:{...clonedRes.data}}}}},bucketsResponseMapper=buckets=>{var ref;return{campaignCount:null==buckets?void 0:buckets.total_campaign_count,senderEmailCount:null==buckets?void 0:buckets.delivery_sender_email_count,medium:null==buckets?void 0:null===(ref=buckets.delivery_medium)||void 0===ref?void 0:ref.map(item=>({key:item.key,docCount:item.doc_count}))}}},8055:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Fk:function(){return setAxiosPromoterIdParam},qM:function(){return removeAxiosDefaults}});var axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70594),next_auth_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(33299);let skipAuthorizationEndpoints=["/v1/auth/validateResetToken"],skipSubAccountPromoterIdEndpoints=["/v1/agency/list"],axiosInstance=axios__WEBPACK_IMPORTED_MODULE_1__.Z.create({baseURL:"https://api.oneclickpolitics.com/api"}),isAccessTokenSet=()=>!!axiosInstance.defaults.headers.common.Authorization,getAuthHeadValue=(request,AuthHeaderValue)=>(null==request?void 0:request.baseURL)==="https://deliveries-production.oneclickpolitics.com/api"?"4ac1cd73-f76c-4651-a510-2ee0ff0107b9":(null==request?void 0:request.baseURL)==="https://oneclickpolitics.com/api"?"ennQMKubSPKhaiy4bkoKm3rkYEwnPZ":AuthHeaderValue,getPromoterId=(url,params,user)=>{var ref,ref1,ref2,ref3;if(null==params?void 0:params.promoter_id)return null==params?void 0:params.promoter_id;let isPromoterIdExcluded=(null==user?void 0:user.promoterId)===(null==user?void 0:user.ocpAdminPromoterId);return(url&&skipSubAccountPromoterIdEndpoints.includes(url)?isPromoterIdExcluded?null==user?void 0:user.assumedPromoterId:null!==(ref=null==user?void 0:user.assumedPromoterId)&&void 0!==ref?ref:null==user?void 0:user.promoterId:isPromoterIdExcluded?null!==(ref1=null==user?void 0:user.subAccountPromoterId)&&void 0!==ref1?ref1:null==user?void 0:user.assumedPromoterId:null!==(ref3=null!==(ref2=null==user?void 0:user.subAccountPromoterId)&&void 0!==ref2?ref2:null==user?void 0:user.assumedPromoterId)&&void 0!==ref3?ref3:null==user?void 0:user.promoterId)||null},modifyRequest=async request=>{let session=await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getSession)();if(session){var ref,ref1;let AuthHeaderValue="Bearer ".concat(session.user.accessToken);if(request.headers?(null===(ref=request.headers)||void 0===ref?void 0:ref.Authorization)||(request.headers={...request.headers}):request.headers={},request.headers.Authorization=getAuthHeadValue(request,AuthHeaderValue),skipAuthorizationEndpoints.includes(null==request?void 0:request.url)||(axiosInstance.defaults.headers.common.Authorization=getAuthHeadValue(request,AuthHeaderValue)),null===(ref1=session.user)||void 0===ref1?void 0:ref1.promoterId){let computedPromoterId=getPromoterId(null==request?void 0:request.url,request.params,session.user);computedPromoterId&&(request.params?request.params={...request.params,promoter_id:computedPromoterId}:request.params={promoter_id:computedPromoterId},axiosInstance.defaults.params={promoter_id:computedPromoterId})}}},removeAxiosDefaults=()=>{delete axiosInstance.defaults.headers.common.Authorization,delete axiosInstance.defaults.params},setAxiosPromoterIdParam=promoterId=>{axiosInstance.defaults.params={promoter_id:promoterId}};axiosInstance.interceptors.request.use(async request=>(isAccessTokenSet()||await modifyRequest(request),request)),axiosInstance.interceptors.response.use(async response=>response,async error=>{if(error.response&&401===error.response.status){let{errors}=error.response.data;errors&&errors[0].includes("JWT expired")&&(await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.signOut)({callbackUrl:"/login"}),removeAxiosDefaults())}return Promise.reject(error)}),__webpack_exports__.ZP=axiosInstance},48303:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{PO:function(){return STATES},WW:function(){return STATES_DICT}});let STATES={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"Washington, D.C.",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},STATES_DICT={US:"AL,AK,AZ,AR,CA,CO,CT,DC,DE,FL,GA,HI,ID,IL,IN,IA,KS,KY,LA,ME,MD,MA,MI,MN,MS,MO,MT,NE,NV,NH,NJ,NM,NY,NC,ND,OH,OK,OR,PA,RI,SC,SD,TN,TX,UT,VT,VA,WA,WV,WI,WY",Canada:"CA-ON,CA-QC,CA-NS,CA-NB,CA-MB,CA-BC,CA-AB,CA-SK,CA-NL,CA-PE,CA-NT,CA-YT,CA-NU",UK:"UK-ENG,UK-WLS,UK-SCT,UK-NIR",Australia:"AU-NSW,AU-QLD,AU-SA,AU-TAS,AU-VIC,AU-WA,AU-ACT,AU-NT"}},47989:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{C5:function(){return replaceRoutes},Cm:function(){return getSubscriptionDatesFromChecks},D9:function(){return beautifyStr},F0:function(){return removeStringTillMarker},F4:function(){return filterEmptyObjectsAtStart},GG:function(){return isOcpAdmin},H5:function(){return countCommaSeparatedStrings},HH:function(){return mapFilter},K:function(){return getRegDocLink},Ks:function(){return getUniqueObjects},M8:function(){return getZiggeoMediaUrls},MK:function(){return replaceEmptyStrAgg},Pp:function(){return getFullName},QF:function(){return convertToBase64},U:function(){return groupPermissionsByResourceType},Vq:function(){return downloadCSVFile},YD:function(){return removeQuotes},a9:function(){return hasDefaultEmail},dB:function(){return findAggregate},jX:function(){return getCampaignPageTitle},jv:function(){return isValidUrl},kJ:function(){return parseNumeric},ky:function(){return mapAgencyTotals},ln:function(){return mapAggregate},m3:function(){return reorderObjectKeys},oY:function(){return getStatesFullNames},p6:function(){return formatDate},pz:function(){return removeDuplicatesByKey},qw:function(){return parseCSVToArrayOfObjects},sC:function(){return repeatAsyncRequestWithDelay},wm:function(){return replaceS3BucketImageSrcName},xc:function(){return findDifferences}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(96486),api_agency_mappers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67574),constants_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48303),dayjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(27484),dayjs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__),moment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30381),moment__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);function hasDefaultEmail(messages,isMultiContent){return isMultiContent?["content_one","content_two"].every(contentType=>messages.some(email=>email.isDefault&&email.contentType===contentType)):messages.some(email=>email.isDefault)}function getRegDocLink(id){return"".concat("https://www.regulations.gov/document","/").concat(id)}function replaceRoutes(route,routesMap){return route.replace(RegExp(Object.keys(routesMap).join("|"),"gi"),matched=>routesMap[matched])}function mapFilter(filter,map){let skip=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!filter||Object.prototype.hasOwnProperty.call(map,filter)||skip)return filter;let updatedFilter=[];return filter.forEach(item=>{let mappedItem=Object.keys(map).find(key=>map[key]===item);void 0!==mappedItem&&updatedFilter.push(mappedItem)}),updatedFilter}function mapAggregate(aggregate,map){let skip=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(null==aggregate?void 0:aggregate.length)||skip)return aggregate;let updatedAggregate=[];return aggregate.forEach(item=>{let mappedItem=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(item,(_value,key)=>map[key]);mappedItem&&updatedAggregate.push(mappedItem)}),updatedAggregate}function findAggregate(aggregate,key){let keyExists=!1;return aggregate.forEach(obj=>{Object.prototype.hasOwnProperty.call(obj,key)&&(keyExists=!0)}),keyExists}function getZiggeoMediaUrls(videoToken){if(!videoToken)return null;let mediaUrl="".concat("https://video-cdn.ziggeo.com/v1/applications","/").concat("c40d674736fa0269182055b9cc4c3fc6","/videos/").concat(videoToken),disabledForceRefresh="force_refresh=false";return{img:"".concat(mediaUrl,"/image?").concat(disabledForceRefresh),video:"".concat(mediaUrl,"/video.mp4?").concat(disabledForceRefresh)}}function beautifyStr(str){return str?str.replaceAll("_"," ").toLowerCase():""}function groupPermissionsByResourceType(permissions){if(!permissions.length)return permissions;let updatedPermissions=[],groupedPermissions=permissions.reduce((x,y)=>((x[y.resourceType]=x[y.resourceType]||[]).push(y),x),{});return Object.keys(groupedPermissions).forEach(key=>{let value=groupedPermissions[key];updatedPermissions.push({name:beautifyStr(key),actions:value})}),updatedPermissions}function downloadCSVFile(data,fileName,callback){if(data&&fileName){let url=window.URL.createObjectURL(new Blob([data])),link=document.createElement("a");link.href=url,link.setAttribute("download",fileName),document.body.appendChild(link),link.click(),link.remove(),callback&&"function"==typeof callback&&callback()}}function parseCSVToArrayOfObjects(csvData,deletedProperty){let lines=csvData.split("\n");(null==lines?void 0:lines.length)&&""===lines[lines.length-1]&&lines.pop();let header=lines[0].split(",").map(h=>h.trim()),data=lines.slice(1).map(line=>{let values=line.split(",").map(v=>v.trim()),obj={};return header.forEach((key,index)=>{obj[key]=values[index]||null}),obj});return deletedProperty&&data.forEach(obj=>{Object.prototype.hasOwnProperty.call(deletedProperty)&&delete obj[deletedProperty]}),data.filter(obj=>Object.keys(obj).length)}function findDifferences(initialObj,updatedObj){let diffObj={},stack=[{initial:initialObj,updated:updatedObj,path:""}];for(;stack.length>0;){let{initial,updated,path}=stack.pop();Object.keys(updated).forEach(key=>{let currentPath=path?"".concat(path,".").concat(key):key,initialValue=initial[key],updatedValue=updated[key];"object"!=typeof updatedValue||null===updatedValue||Array.isArray(updatedValue)?initialValue!==updatedValue&&(diffObj[currentPath]=updatedValue):"object"!=typeof initialValue||null===initialValue?diffObj[currentPath]=updatedValue:stack.push({initial:initialValue,updated:updatedValue,path:currentPath})})}return diffObj}function filterEmptyObjectsAtStart(arr){let foundNonEmpty=!1;return arr.filter(obj=>(!!foundNonEmpty||0!==Object.keys(obj).length)&&(foundNonEmpty=!0,!0))}function isOcpAdmin(roles){return null==roles?void 0:roles.find(role=>"OCP_ADMIN"===role.name)}function getFullName(firstName,lastName){return"".concat(null!=firstName?firstName:""," ").concat(null!=lastName?lastName:"")}function getUniqueObjects(arr){let uniqueIds=new Set;return arr.filter(obj=>!uniqueIds.has(obj.id)&&(uniqueIds.add(obj.id),!0))}function convertToBase64(file){return new Promise((resolve,reject)=>{let reader=new FileReader;reader.onload=()=>{resolve(reader.result)},reader.onerror=error=>{reject(error)},reader.readAsDataURL(file)})}function reorderObjectKeys(obj,firstKey){if(!obj[firstKey])return obj;let newObject={[firstKey]:obj[firstKey]};return Object.keys(obj).forEach(key=>{key!==firstKey&&(newObject[key]=obj[key])}),newObject}function removeStringTillMarker(str,marker){let markerIndex=str.indexOf(marker);return -1===markerIndex?str:str.substring(markerIndex+marker.length)}function mapAgencyTotals(buckets,promoterId){var ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7;let parentTotals=(0,api_agency_mappers__WEBPACK_IMPORTED_MODULE_1__.F)(buckets[promoterId]);return{advocates:null==parentTotals?void 0:parentTotals.senderEmailCount,campaigns:null==parentTotals?void 0:parentTotals.campaignCount,emails:(null===(ref1=null==parentTotals?void 0:null===(ref=parentTotals.medium)||void 0===ref?void 0:ref.find(item=>"email"===item.key))||void 0===ref1?void 0:ref1.docCount)||0,calls:(null===(ref3=null==parentTotals?void 0:null===(ref2=parentTotals.medium)||void 0===ref2?void 0:ref2.find(item=>"phone"===item.key))||void 0===ref3?void 0:ref3.docCount)||0,videos:(null===(ref5=null==parentTotals?void 0:null===(ref4=parentTotals.medium)||void 0===ref4?void 0:ref4.find(item=>"video"===item.key))||void 0===ref5?void 0:ref5.docCount)||0,posts:(null===(ref7=null==parentTotals?void 0:null===(ref6=parentTotals.medium)||void 0===ref6?void 0:ref6.find(item=>"twitter"===item.key))||void 0===ref7?void 0:ref7.docCount)||0}}function getCampaignPageTitle(campaign){return campaign?campaign.hostedPageTitle?campaign.hostedPageTitle:campaign.campaignName:"Campaign Page"}function removeQuotes(str){return str.startsWith('"')&&str.endsWith('"')||str.startsWith("'")&&str.endsWith("'")?str.slice(1,-1):str}function replaceEmptyStrAgg(arr,key){if((null==arr?void 0:arr.length)===0)return[];let emptyKeyObj=arr.find(obj=>""===Object.keys(obj)[0]);if(emptyKeyObj){let emptyKeyValue=Object.values(emptyKeyObj)[0],targetObj=arr.find(obj=>Object.keys(obj)[0]===key);targetObj?targetObj[key]+=emptyKeyValue:arr=arr.map(obj=>""===Object.keys(obj)[0]?{[key]:emptyKeyValue}:obj),arr=arr.filter(obj=>""!==Object.keys(obj)[0])}return arr}function repeatAsyncRequestWithDelay(requestFn){let callback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,delay=ms=>new Promise(resolve=>setTimeout(resolve,ms));return async function retry(remainingRetries){try{return await requestFn()}catch(error){var ref,ref1,ref2;if(callback&&"function"==typeof callback&&callback(error),remainingRetries>0&&(null===(ref2=null==error?void 0:null===(ref=error.response)||void 0===ref?void 0:null===(ref1=ref.data)||void 0===ref1?void 0:ref1.errors[0])||void 0===ref2?void 0:ref2.includes("recvAddress")))return await delay(10),retry(remainingRetries-1);throw error}}(5)}function formatDate(inputDate){if(!inputDate)return null;let parsedDate=dayjs__WEBPACK_IMPORTED_MODULE_3___default()(inputDate);return parsedDate.isValid()?/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(inputDate)?inputDate:parsedDate.format("YYYY-MM-DD"):null}function replaceS3BucketImageSrcName(src){return src?src.includes("ocp-new-staging-images")?src.replace("ocp-new-staging-images.s3.amazonaws.com","s3.amazonaws.com/ocp-new-staging-images"):src.replace("images.oneclickpolitics.com.s3.amazonaws","s3.amazonaws.com/images.oneclickpolitics"):""}function parseNumeric(input){return"number"!=typeof input||Number.isNaN(input)?"string"!=typeof input||Number.isNaN(Number(input))?0:Number(input):input}function getStatesFullNames(targetCountry,abbreviationString,statesCount){let result="US"!==targetCountry||50===statesCount?constants_settings__WEBPACK_IMPORTED_MODULE_2__.WW[targetCountry]:abbreviationString;return null==result?void 0:result.split(",").map(abbr=>abbr.trim()).map(abbr=>constants_settings__WEBPACK_IMPORTED_MODULE_2__.PO[abbr.toUpperCase()]||abbr).filter(name=>name)}function removeDuplicatesByKey(arr,key){if(!(null==arr?void 0:arr.length))return arr;let uniqueMap=new Map;return arr.forEach(item=>{uniqueMap.set(item[key],item)}),Array.from(uniqueMap.values())}function countCommaSeparatedStrings(str){let fallback=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!str)return fallback;let items=str.split(",").map(item=>item.trim());return items.length}function isValidUrl(value){return!!value&&/^(https?:\/\/)?([a-zA-Z0-9-]+\.[a-zA-Z]{2,})/.test(value)}function getSubscriptionDatesFromChecks(checks){if(!checks||!Array.isArray(checks)||0===checks.length)return{startDate:null,endDate:null};let latestCheck=checks.filter(c=>c&&"number"==typeof c.id).reduce((latest,current)=>latest?current.id>latest.id?current:latest:current,null);if(!latestCheck)return{startDate:null,endDate:null};let startDate=latestCheck.activeFrom?moment__WEBPACK_IMPORTED_MODULE_4___default()(latestCheck.activeFrom).format("MMMM Do, YYYY"):null,endDate=latestCheck.activeTo?moment__WEBPACK_IMPORTED_MODULE_4___default()(latestCheck.activeTo).format("MMMM Do, YYYY"):null;return{startDate,endDate}}}}]);